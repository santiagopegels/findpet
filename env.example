# ==============================================
# CONFIGURACIÓN DEL SERVIDOR FINDOG
# ==============================================

# Configuración del servidor Node.js
PORT=3000
NODE_ENV=development

# URL base del servidor (para construcción de URLs de imágenes)
URL=http://localhost

# ==============================================
# BASE DE DATOS
# ==============================================

# Conexión a MongoDB
MONGO_DB_CONNECTION=mongodb://localhost:27017/findog

# ==============================================
# SERVICIO DE MACHINE LEARNING
# ==============================================

# URL del servicio reverse-searcher (Python)
MACHINE_LEARNING_URL=http://localhost:5000

# API Key para comunicación con el servicio ML
# ⚠️ CAMBIAR en producción por una clave segura
MACHINE_LEARNING_API_KEY=secure-test-key-change-in-production

# ==============================================
# ALMACENAMIENTO
# ==============================================

# Tipo de almacenamiento: 'local' | 'aws-s3' | 'gcp' (solo local implementado)
STORAGE_TYPE=local

# ==============================================
# CONFIGURACIÓN DE SEGURIDAD
# ==============================================

# ==============================================
# REDIS (SISTEMA DE CACHING)
# ==============================================

# Habilitar/deshabilitar Redis
REDIS_ENABLED=true

# Configuración de conexión Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# TTL específicos por tipo de cache (en segundos)
CACHE_TTL=300
CACHE_TTL_SEARCHES=300
CACHE_TTL_SEARCH_COUNT=600
CACHE_TTL_REVERSE_SEARCH=180
CACHE_TTL_TOP_CITIES=1800
CACHE_TTL_METRICS=300

# ==============================================
# CONFIGURACIÓN DE SEGURIDAD AVANZADA
# ==============================================

# Rate limiting personalizable
RATE_LIMIT_WINDOW=900000          # 15 minutos
RATE_LIMIT_MAX=100

UPLOAD_RATE_LIMIT_WINDOW=3600000   # 1 hora
UPLOAD_RATE_LIMIT_MAX=10

REVERSE_SEARCH_RATE_LIMIT_WINDOW=3600000  # 1 hora
REVERSE_SEARCH_RATE_LIMIT_MAX=20

# Tamaño máximo de imagen en bytes (por defecto 5MB)
MAX_IMAGE_SIZE=5242880

# ==============================================
# BASE DE DATOS AVANZADA
# ==============================================

# Pool de conexiones MongoDB
DB_MAX_POOL_SIZE=10
DB_SERVER_SELECTION_TIMEOUT=5000
DB_SOCKET_TIMEOUT=45000

# Índices automáticos al iniciar
CREATE_INDEXES_ON_STARTUP=true

# ==============================================
# MACHINE LEARNING AVANZADO
# ==============================================

# Timeouts y reintentos para ML service
ML_TIMEOUT=30000
ML_RETRIES=3
ML_RETRY_DELAY=1000

# ==============================================
# BÚSQUEDAS Y PERFORMANCE
# ==============================================

# Tiempo límite para considerar búsqueda lenta (ms)
SLOW_QUERY_THRESHOLD=2000
VERY_SLOW_QUERY_THRESHOLD=5000

# ==============================================
# CRON JOBS
# ==============================================

# Programación para eliminar búsquedas antiguas
CRON_REMOVE_OLD_SEARCHES=0 2 * * *  # 2 AM diario
SEARCH_MAX_AGE_DAYS=365             # Días antes de eliminar
CRON_BATCH_SIZE=100                 # Búsquedas por lote

# ==============================================
# LOGGING AVANZADO
# ==============================================

# Nivel de logging (error, warn, info, debug)
LOG_LEVEL=info

# Formato de logs (json, text)
LOG_FORMAT=json

# Directorio de logs
LOGS_DIR=./logs

# ==============================================
# DESARROLLO Y DEBUGGING
# ==============================================

# Habilitar logs de debugging
DEBUG_LOGS=false

# Simular servicios externos en desarrollo
MOCK_EXTERNAL_SERVICES=false 